# ShellCheck configuration for Manjaro ARM Pi 5 Installer
# Phase 3 Foundation - Linting Standards

# Enable all optional checks
enable=all

# Disable specific checks that conflict with our patterns

# SC1090: Can't follow non-constant source. Use a directive to specify location.
# Disabled: We use dynamic sourcing for plugins
disable=SC1090

# SC1091: Not following: file not included in mock filesystem
# Disabled: shellcheck can't always find sourced files in our structure
disable=SC1091

# SC2034: Variable appears unused. Verify use (or export if used externally)
# Disabled: Plugin metadata variables are read by loader, not directly in plugin
disable=SC2034

# SC2154: Variable referenced but not assigned
# Disabled: Variables from sourced files (lib/log.sh) may trigger false positives
disable=SC2154

# SC2155: Declare and assign separately to avoid masking return values
# Disabled: We prefer compact declarations in many places
disable=SC2155

# SC2250: Prefer braces around variables
# Disabled: Stylistic preference, not a correctness issue
disable=SC2250

# SC2292: Prefer [[ ]] over [ ]
# Disabled: Both are valid, we use both patterns
disable=SC2292

# Set shell dialect
shell=bash

# External sources (to help shellcheck understand our structure)
# These will be created as we build the project
source-path=SCRIPTDIR
source-path=lib
source-path=plugins

# Severity levels
# error: Exit with error code (default for SC1xxx-SC2xxx)
# warning: Exit with error code (default for SC3xxx)
# info: Exit with error code (default for SC4xxx)
# style: Do not exit with error code (default for SC5xxx)

# Only fail on errors and warnings, not info or style
# This means stylistic suggestions won't break the build

# Disable specific info-level checks that are too noisy
disable=SC2310  # Function invoked in condition disables set -e
disable=SC2312  # Consider invoking command separately
disable=SC2012  # Use find instead of ls
disable=SC2249  # Consider adding default case
disable=SC2086  # Double quote to prevent globbing (when intentional)
disable=SC2162  # read without -r
disable=SC2181  # Check exit code directly
disable=SC2248  # Prefer double quoting
disable=SC2001  # Use parameter expansion instead of sed

# Check sourced files
check-sourced=true
